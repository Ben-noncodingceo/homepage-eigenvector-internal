# Cloudflare Pages è‡ªåŠ¨éƒ¨ç½²æŒ‡å—

> **é‡è¦è¯´æ˜**ï¼šæ­¤ç½‘ç«™ä¸º**å³æœªç§‘æŠ€/è´¨å¿ƒæ•™è‚²**ï¼ˆCenter of Mass Education Tech.ï¼‰å†…éƒ¨åŸ¹è®­ã€æµ‹è¯•ã€åˆ†äº«ä½¿ç”¨ã€‚

æœ¬æŒ‡å—å°†å¸®åŠ©æ‚¨å°† Jekyll ç½‘ç«™è‡ªåŠ¨éƒ¨ç½²åˆ° Cloudflare Pagesã€‚

## ğŸ“‹ å‡†å¤‡å·¥ä½œæ¸…å•

åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨å·²ç»å‡†å¤‡å¥½ä»¥ä¸‹å†…å®¹ï¼š

- [ ] ä¸€ä¸ª Cloudflare è´¦æˆ·ï¼ˆå…è´¹æ³¨å†Œï¼šhttps://dash.cloudflare.com/sign-upï¼‰
- [ ] æ‚¨çš„ä»£ç å·²ç»æ¨é€åˆ° GitHub ä»“åº“
- [ ] æ‚¨æœ‰ GitHub ä»“åº“çš„ç®¡ç†å‘˜æƒé™

---

## ğŸš€ æ–¹æ³•ä¸€ï¼šä½¿ç”¨ Cloudflare Dashboardï¼ˆæ¨èï¼Œæœ€ç®€å•ï¼‰

è¿™æ˜¯æœ€ç®€å•çš„æ–¹æ³•ï¼Œé€‚åˆä»£ç å°ç™½ã€‚Cloudflare ä¼šè‡ªåŠ¨æ£€æµ‹æ‚¨çš„ä»£ç å¹¶é…ç½®éƒ¨ç½²ã€‚

### æ­¥éª¤ 1ï¼šç™»å½• Cloudflare Dashboard

1. è®¿é—® https://dash.cloudflare.com/
2. ä½¿ç”¨æ‚¨çš„é‚®ç®±æ³¨å†Œæˆ–ç™»å½• Cloudflare è´¦æˆ·ï¼ˆå…è´¹ï¼‰

### æ­¥éª¤ 2ï¼šåˆ›å»º Pages é¡¹ç›®

1. åœ¨ Cloudflare Dashboard å·¦ä¾§èœå•ä¸­ï¼Œç‚¹å‡» **"Workers & Pages"**
2. ç‚¹å‡» **"Create application"** æˆ– **"Pages"** æ ‡ç­¾
3. ç‚¹å‡» **"Connect to Git"** æŒ‰é’®

### æ­¥éª¤ 3ï¼šè¿æ¥ GitHub ä»“åº“

1. é€‰æ‹© **"GitHub"** ä½œä¸º Git æä¾›å•†
2. å¦‚æœè¿™æ˜¯ç¬¬ä¸€æ¬¡è¿æ¥ï¼ŒCloudflare ä¼šè¦æ±‚æ‚¨æˆæƒè®¿é—® GitHub
   - ç‚¹å‡» **"Authorize Cloudflare Pages"**
   - é€‰æ‹©æ‚¨è¦æˆæƒçš„ä»“åº“ï¼ˆå¯ä»¥é€‰æ‹©å•ä¸ªä»“åº“æˆ–æ‰€æœ‰ä»“åº“ï¼‰
   - ç‚¹å‡» **"Install"** å®Œæˆæˆæƒ
3. é€‰æ‹©æ‚¨çš„ä»“åº“ï¼š`homepage-eigenvector-internal`ï¼ˆæˆ–æ‚¨çš„ä»“åº“åç§°ï¼‰

### æ­¥éª¤ 4ï¼šé…ç½®æ„å»ºè®¾ç½®

åœ¨ **"Set up builds and deployments"** é¡µé¢ï¼Œå¡«å†™ä»¥ä¸‹ä¿¡æ¯ï¼š

#### é¡¹ç›®åç§°
- **Project name**: è¾“å…¥ä¸€ä¸ªé¡¹ç›®åç§°ï¼Œä¾‹å¦‚ï¼š`homepage-eigenvector-internal`
- è¿™ä¼šæˆä¸ºæ‚¨çš„ç½‘ç«™åœ°å€çš„ä¸€éƒ¨åˆ†ï¼Œä¾‹å¦‚ï¼š`homepage-eigenvector-internal.pages.dev`

#### ç”Ÿäº§åˆ†æ”¯
- **Production branch**: é€‰æ‹© `master` æˆ– `main`ï¼ˆæ ¹æ®æ‚¨çš„ä»“åº“ä¸»åˆ†æ”¯åç§°ï¼‰

#### æ„å»ºè®¾ç½®
ç‚¹å‡» **"Show advanced settings"** å±•å¼€é«˜çº§è®¾ç½®ï¼Œç„¶åå¡«å†™ï¼š

- **Framework preset**: é€‰æ‹© `Jekyll`
- **Build command**: `bundle exec jekyll build`
- **Build output directory**: `_site`
- **Root directory**: ç•™ç©ºï¼ˆä½¿ç”¨ `/`ï¼‰

#### ç¯å¢ƒå˜é‡ï¼ˆå¯é€‰ä½†æ¨èï¼‰
ç‚¹å‡» **"Add environment variable"** æ·»åŠ ï¼š

1. **å˜é‡å**: `JEKYLL_ENV`
   **å€¼**: `production`

2. **å˜é‡å**: `RUBY_VERSION`
   **å€¼**: `3.1`

### æ­¥éª¤ 5ï¼šä¿å­˜å¹¶éƒ¨ç½²

1. ç‚¹å‡» **"Save and Deploy"** æŒ‰é’®
2. Cloudflare ä¼šè‡ªåŠ¨å¼€å§‹ç¬¬ä¸€æ¬¡æ„å»ºå’Œéƒ¨ç½²
3. ç­‰å¾…å‡ åˆ†é’Ÿï¼Œæ„å»ºå®Œæˆåæ‚¨ä¼šçœ‹åˆ°éƒ¨ç½²æˆåŠŸçš„æ¶ˆæ¯

### æ­¥éª¤ 6ï¼šæŸ¥çœ‹æ‚¨çš„ç½‘ç«™

éƒ¨ç½²æˆåŠŸåï¼ŒCloudflare ä¼šæä¾›ä¸€ä¸ªå…è´¹çš„ `.pages.dev` åŸŸåï¼Œä¾‹å¦‚ï¼š
- `https://homepage-eigenvector-internal.pages.dev`

æ‚¨å¯ä»¥åœ¨ Cloudflare Dashboard çš„ Pages é¡¹ç›®é¡µé¢æ‰¾åˆ°è¿™ä¸ªåœ°å€ã€‚

---

## ğŸ”„ æ–¹æ³•äºŒï¼šä½¿ç”¨ GitHub Actionsï¼ˆé«˜çº§ï¼Œå¯é€‰ï¼‰

å¦‚æœæ‚¨æƒ³ä½¿ç”¨ GitHub Actions è‡ªåŠ¨éƒ¨ç½²ï¼Œéœ€è¦é¢å¤–çš„é…ç½®ã€‚

### æ­¥éª¤ 1ï¼šè·å– Cloudflare API Token

1. ç™»å½• Cloudflare Dashboard
2. ç‚¹å‡»å³ä¸Šè§’çš„ç”¨æˆ·å›¾æ ‡ï¼Œé€‰æ‹© **"My Profile"**
3. ç‚¹å‡» **"API Tokens"** æ ‡ç­¾
4. ç‚¹å‡» **"Create Token"**
5. ç‚¹å‡» **"Edit Cloudflare Workers"** æ¨¡æ¿æ—è¾¹çš„ **"Get started"**
6. åœ¨æƒé™è®¾ç½®ä¸­ï¼š
   - **Account** â†’ **Cloudflare Pages** â†’ **Edit**
7. ç‚¹å‡» **"Continue to summary"**ï¼Œç„¶å **"Create Token"**
8. **é‡è¦**ï¼šå¤åˆ¶ç”Ÿæˆçš„ Tokenï¼ˆåªæ˜¾ç¤ºä¸€æ¬¡ï¼Œè¯·å¦¥å–„ä¿å­˜ï¼‰

### æ­¥éª¤ 2ï¼šè·å– Account ID

1. åœ¨ Cloudflare Dashboard å³ä¾§è¾¹æ ï¼Œæ‰¾åˆ° **"Account ID"**
2. å¤åˆ¶è¿™ä¸ª ID

### æ­¥éª¤ 3ï¼šåœ¨ GitHub ä»“åº“ä¸­æ·»åŠ  Secrets

1. æ‰“å¼€æ‚¨çš„ GitHub ä»“åº“é¡µé¢
2. ç‚¹å‡» **"Settings"**ï¼ˆè®¾ç½®ï¼‰æ ‡ç­¾
3. åœ¨å·¦ä¾§èœå•ä¸­ï¼Œç‚¹å‡» **"Secrets and variables"** â†’ **"Actions"**
4. ç‚¹å‡» **"New repository secret"** æ·»åŠ ä»¥ä¸‹ä¸‰ä¸ªå¯†é’¥ï¼š

   **Secret 1:**
   - **Name**: `CLOUDFLARE_API_TOKEN`
   - **Value**: ç²˜è´´æ­¥éª¤ 1 ä¸­å¤åˆ¶çš„ API Token

   **Secret 2:**
   - **Name**: `CLOUDFLARE_ACCOUNT_ID`
   - **Value**: ç²˜è´´æ­¥éª¤ 2 ä¸­å¤åˆ¶çš„ Account ID

   **Secret 3:**
   - **Name**: `CLOUDFLARE_PROJECT_NAME`
   - **Value**: æ‚¨çš„é¡¹ç›®åç§°ï¼ˆä¾‹å¦‚ï¼š`homepage-eigenvector-internal`ï¼‰

### æ­¥éª¤ 4ï¼šæ¨é€ä»£ç è§¦å‘éƒ¨ç½²

1. ç¡®ä¿ `.github/workflows/deploy-cloudflare.yml` æ–‡ä»¶å·²ç»å­˜åœ¨äºä»“åº“ä¸­
2. æ¨é€ä»»ä½•æ›´æ”¹åˆ° `master` æˆ– `main` åˆ†æ”¯
3. GitHub Actions ä¼šè‡ªåŠ¨è¿è¡Œå¹¶éƒ¨ç½²åˆ° Cloudflare Pages

---

## âœ… éªŒè¯éƒ¨ç½²

### æ£€æŸ¥éƒ¨ç½²çŠ¶æ€

1. åœ¨ Cloudflare Dashboard ä¸­ï¼Œè¿›å…¥æ‚¨çš„ Pages é¡¹ç›®
2. ç‚¹å‡» **"Deployments"** æ ‡ç­¾æŸ¥çœ‹æ‰€æœ‰éƒ¨ç½²
3. ç»¿è‰²å‹¾å· âœ… è¡¨ç¤ºéƒ¨ç½²æˆåŠŸ
4. çº¢è‰²å‰å· âŒ è¡¨ç¤ºéƒ¨ç½²å¤±è´¥ï¼ˆç‚¹å‡»æŸ¥çœ‹é”™è¯¯è¯¦æƒ…ï¼‰

### æµ‹è¯•ç½‘ç«™

1. è®¿é—® Cloudflare æä¾›çš„ `.pages.dev` åŸŸå
2. æ£€æŸ¥ç½‘ç«™æ˜¯å¦æ­£å¸¸æ˜¾ç¤º
3. æµ‹è¯•è¯­è¨€åˆ‡æ¢åŠŸèƒ½æ˜¯å¦æ­£å¸¸å·¥ä½œ

---

## ğŸ”§ æ•…éšœæ’é™¤

### é—®é¢˜ 1ï¼šæ„å»ºå¤±è´¥

**å¯èƒ½åŸå› **ï¼š
- Ruby ç‰ˆæœ¬ä¸å…¼å®¹
- ç¼ºå°‘ä¾èµ–é¡¹
- æ„å»ºå‘½ä»¤é”™è¯¯

**è§£å†³æ–¹æ³•**ï¼š
1. æ£€æŸ¥ Cloudflare Dashboard ä¸­çš„æ„å»ºæ—¥å¿—
2. ç¡®ä¿ `Gemfile` æ–‡ä»¶å­˜åœ¨ä¸”æ­£ç¡®
3. å°è¯•åœ¨æœ¬åœ°è¿è¡Œ `bundle exec jekyll build` çœ‹æ˜¯å¦æœ‰é”™è¯¯

### é—®é¢˜ 2ï¼šç½‘ç«™æ˜¾ç¤ºç©ºç™½

**å¯èƒ½åŸå› **ï¼š
- æ„å»ºè¾“å‡ºç›®å½•é…ç½®é”™è¯¯
- æ–‡ä»¶è·¯å¾„é—®é¢˜

**è§£å†³æ–¹æ³•**ï¼š
1. ç¡®è®¤ **Build output directory** è®¾ç½®ä¸º `_site`
2. æ£€æŸ¥ `_config.yml` ä¸­çš„ `baseurl` è®¾ç½®

### é—®é¢˜ 3ï¼šGitHub æˆæƒå¤±è´¥

**è§£å†³æ–¹æ³•**ï¼š
1. åœ¨ Cloudflare Dashboard ä¸­ï¼Œè¿›å…¥ **"Workers & Pages"** â†’ **"Manage deployments"**
2. ç‚¹å‡» **"Connect to Git"** é‡æ–°æˆæƒ

---

## ğŸ“ è‡ªåŠ¨éƒ¨ç½²è¯´æ˜

### è‡ªåŠ¨è§¦å‘éƒ¨ç½²çš„æƒ…å†µ

ä½¿ç”¨ **æ–¹æ³•ä¸€ï¼ˆCloudflare Dashboardï¼‰** æ—¶ï¼Œä»¥ä¸‹æ“ä½œä¼šè‡ªåŠ¨è§¦å‘éƒ¨ç½²ï¼š

- âœ… æ¨é€åˆ° `master` æˆ– `main` åˆ†æ”¯
- âœ… åˆ›å»º Pull Requestï¼ˆä¼šåˆ›å»ºé¢„è§ˆéƒ¨ç½²ï¼‰
- âœ… åˆå¹¶ Pull Request

### æ‰‹åŠ¨è§¦å‘éƒ¨ç½²

1. åœ¨ Cloudflare Dashboard ä¸­ï¼Œè¿›å…¥æ‚¨çš„ Pages é¡¹ç›®
2. ç‚¹å‡» **"Deployments"** æ ‡ç­¾
3. ç‚¹å‡» **"Retry deployment"** å¯ä»¥é‡æ–°éƒ¨ç½²æœ€æ–°ç‰ˆæœ¬

---

## ğŸŒ è‡ªå®šä¹‰åŸŸåï¼ˆå¯é€‰ï¼‰

å¦‚æœæ‚¨æœ‰è‡ªå·±çš„åŸŸåï¼Œå¯ä»¥å°†å…¶è¿æ¥åˆ° Cloudflare Pagesï¼š

1. åœ¨ Cloudflare Dashboard ä¸­ï¼Œè¿›å…¥æ‚¨çš„ Pages é¡¹ç›®
2. ç‚¹å‡» **"Custom domains"** æ ‡ç­¾
3. ç‚¹å‡» **"Set up a custom domain"**
4. è¾“å…¥æ‚¨çš„åŸŸåï¼ˆä¾‹å¦‚ï¼š`example.com`ï¼‰
5. æŒ‰ç…§æç¤ºé…ç½® DNS è®°å½•

---

## ğŸ“š ç›¸å…³èµ„æº

- [Cloudflare Pages æ–‡æ¡£](https://developers.cloudflare.com/pages/)
- [Jekyll æ–‡æ¡£](https://jekyllrb.com/docs/)
- [GitHub Actions æ–‡æ¡£](https://docs.github.com/en/actions)

---

## ğŸ’¡ æç¤º

1. **å…è´¹é¢åº¦**ï¼šCloudflare Pages æä¾›å…è´¹å¥—é¤ï¼ŒåŒ…æ‹¬ï¼š
   - 500 æ¬¡æ„å»º/æœˆ
   - æ— é™å¸¦å®½
   - æ— é™è¯·æ±‚

2. **é¢„è§ˆéƒ¨ç½²**ï¼šæ¯æ¬¡åˆ›å»º Pull Request æ—¶ï¼ŒCloudflare ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªé¢„è§ˆéƒ¨ç½²ï¼Œæ–¹ä¾¿æ‚¨æµ‹è¯•æ›´æ”¹

3. **æ„å»ºæ—¶é—´**ï¼šé¦–æ¬¡æ„å»ºå¯èƒ½éœ€è¦ 3-5 åˆ†é’Ÿï¼Œåç»­æ„å»ºé€šå¸¸æ›´å¿«ï¼ˆ1-2 åˆ†é’Ÿï¼‰

4. **ç¼“å­˜**ï¼šCloudflare ä¼šè‡ªåŠ¨ç¼“å­˜é™æ€èµ„æºï¼Œæé«˜ç½‘ç«™åŠ è½½é€Ÿåº¦

---

## ğŸ†˜ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœæ‚¨åœ¨éƒ¨ç½²è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œå¯ä»¥ï¼š

1. æŸ¥çœ‹ Cloudflare Dashboard ä¸­çš„æ„å»ºæ—¥å¿—
2. æ£€æŸ¥ GitHub Actions çš„è¿è¡Œæ—¥å¿—ï¼ˆå¦‚æœä½¿ç”¨æ–¹æ³•äºŒï¼‰
3. å‚è€ƒ Cloudflare Pages å®˜æ–¹æ–‡æ¡£
4. è”ç³»æŠ€æœ¯æ”¯æŒ

---

**ç¥æ‚¨éƒ¨ç½²é¡ºåˆ©ï¼** ğŸ‰

